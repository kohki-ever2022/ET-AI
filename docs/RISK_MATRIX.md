# ET-AI リスクマトリックス

このドキュメントは、ET-AIプロジェクトの全リスクを視覚的にマッピングし、優先順位を明確化します。

## リスクマトリックス図

```
影響度
  │
高│  🔴🔴🔴🔴🔴🔴🔴🔴🔴
  │  ┌─────────────────────────────────────────────────────┐
  │  │ R1.1  R4.1  R4.2  R4.3  R4.5  R5.1  R5.2  R2.3      │
  │  │ Claude API  価格   仕様   規制  npm   データ セキュ パフォ   │
  │  │ レート制限  変動   変更   変更  脆弱性 消失  リティ  マンス  │
  │  │ (高×高=9) (中×高=6) (中×高=6) (低×高=3) (中×高=6) (低×高=3) (低×高=3) (中×高=6) │
  │  └─────────────────────────────────────────────────────┘
  │
中│  🟡🟡🟡🟡🟡🟡🟡🟡🟡🟡
  │  ┌─────────────────────────────────────────────────────┐
  │  │ R1.2  R1.3  R1.5  R2.1  R2.2  R3.2  R3.3  R5.3      │
  │  │ Voyage  Firestore Bundle 機能  仕様  スキル コミュ ユーザ   │
  │  │ API   パフォ   サイズ  追加  変更  不足   不足   誤操作   │
  │  │ (中×中=4) (中×中=4) (中×中=4) (高×中=6) (中×中=4) (中×中=4) (中×中=4) (中×中=4) │
  │  │                                                         │
  │  │ R4.4  R5.4  R5.5                                        │
  │  │ Firebase デプロイ 監視                                    │
  │  │ 価格   失敗   不備                                       │
  │  │ (低×中=2) (低×中=2) (中×中=4)                          │
  │  └─────────────────────────────────────────────────────┘
  │
低│  🟢🟢
  │  ┌─────────────────────────────────────────────────────┐
  │  │ R1.4  R3.1                                           │
  │  │ コールド キーパーソン                                     │
  │  │ スタート 離脱                                            │
  │  │ (中×低=2) (低×低=1)                                    │
  │  └─────────────────────────────────────────────────────┘
  │
  └──────────────────────────────────────────────────→
     低                中                        高     発生確率
```

## リスク一覧（優先度順）

### 🔴 最優先リスク（スコア 6-9）

即座に対策を実施し、週次でモニタリングが必要です。

| ID | リスク名 | カテゴリー | 確率 | 影響 | スコア | 対策状況 |
|----|----------|-----------|------|------|--------|---------|
| **R1.1** | Claude APIレート制限超過 | 技術 | 高 | 高 | **9** | ✅ 対策済（キューイング実装） |
| **R4.1** | API価格の大幅な変動 | 外部依存 | 中 | 高 | **6** | 🔵 監視中（コスト監視システム） |
| **R4.2** | Claude API仕様変更 | 外部依存 | 中 | 高 | **6** | 🔵 監視中（SDK固定、アナウンス監視） |
| **R4.5** | npmパッケージ脆弱性 | 外部依存 | 中 | 高 | **6** | 🟡 計画中（Dependabot導入） |
| **R2.1** | 機能追加要望の増加 | スコープ | 高 | 中 | **6** | 🔵 監視中（変更管理プロセス） |
| **R2.3** | パフォーマンス要件変更 | スコープ | 中 | 高 | **6** | ✅ 対策済（スケーラブル設計） |

### 🟡 高優先リスク（スコア 3-5）

計画的に対策を実施し、月次でモニタリングが必要です。

| ID | リスク名 | カテゴリー | 確率 | 影響 | スコア | 対策状況 |
|----|----------|-----------|------|------|--------|---------|
| **R1.2** | Voyage AI API不安定性 | 技術 | 中 | 中 | **4** | ✅ 対策済（リトライ戦略） |
| **R1.3** | Firestoreパフォーマンス劣化 | 技術 | 中 | 中 | **4** | ✅ 対策済（インデックス、非正規化） |
| **R1.5** | バンドルサイズ肥大化 | 技術 | 中 | 中 | **4** | 🟡 計画中（コードスプリッティング） |
| **R2.2** | 仕様変更による手戻り | スコープ | 中 | 中 | **4** | 🔵 監視中（UAT実施） |
| **R3.1** | キーパーソン離脱 | 人的 | 低 | 高 | **3** | 🔵 監視中（ドキュメント化） |
| **R3.2** | スキル不足 | 人的 | 中 | 中 | **4** | 🔵 実施中（トレーニング） |
| **R3.3** | コミュニケーション不足 | 人的 | 中 | 中 | **4** | 🔵 実施中（日次スタンドアップ） |
| **R4.3** | プライバシー規制変更 | 外部依存 | 低 | 高 | **3** | 🔵 監視中（法務レビュー） |
| **R5.1** | 本番データ消失 | 運用 | 低 | 高 | **3** | ✅ 対策済（自動バックアップ） |
| **R5.2** | セキュリティ侵害 | 運用 | 低 | 高 | **3** | ✅ 対策済（認証、認可、監査） |
| **R5.3** | ユーザー誤操作 | 運用 | 中 | 中 | **4** | 🟡 計画中（ソフトデリート） |
| **R5.5** | 監視・アラート設定不備 | 運用 | 中 | 中 | **4** | 🔵 実施中（監視システム構築） |

### 🟢 中優先リスク（スコア 1-2）

監視を継続し、必要に応じて対策を実施します。

| ID | リスク名 | カテゴリー | 確率 | 影響 | スコア | 対策状況 |
|----|----------|-----------|------|------|--------|---------|
| **R1.4** | Cloud Functionsコールドスタート | 技術 | 中 | 低 | **2** | ✅ 対策済（minInstances設定） |
| **R4.4** | Firebase価格改定 | 外部依存 | 低 | 中 | **2** | ✅ 対策済（リード削減） |
| **R5.4** | Cloud Functionsデプロイ失敗 | 運用 | 低 | 中 | **2** | 🔵 実施中（CI/CD、ステージング） |

## カテゴリー別サマリー

### 1. 技術リスク（5件）

```
優先度分布:
🔴 最優先: 1件 (R1.1)
🟡 高:     3件 (R1.2, R1.3, R1.5)
🟢 中:     1件 (R1.4)
```

**主要な懸念事項**:
- Claude APIレート制限が最大のリスク
- パフォーマンスとスケーラビリティに継続的な注意が必要

**対策の進捗**: 80%完了（5件中4件が対策済または実施中）

### 2. スコープリスク（3件）

```
優先度分布:
🔴 最優先: 2件 (R2.1, R2.3)
🟡 高:     1件 (R2.2)
```

**主要な懸念事項**:
- 機能追加要望の管理が重要
- パフォーマンス要件の変更に備える必要あり

**対策の進捗**: 67%完了（3件中2件が対策済または実施中）

### 3. 人的リスク（3件）

```
優先度分布:
🟡 高: 3件 (R3.1, R3.2, R3.3)
```

**主要な懸念事項**:
- キーパーソン依存の解消が必要
- チームスキルの継続的な向上が必要

**対策の進捗**: 67%実施中（ドキュメント化、トレーニング進行中）

### 4. 外部依存リスク（5件）

```
優先度分布:
🔴 最優先: 3件 (R4.1, R4.2, R4.5)
🟡 高:     1件 (R4.3)
🟢 中:     1件 (R4.4)
```

**主要な懸念事項**:
- Claude APIへの依存度が高い
- npm エコシステムのセキュリティ

**対策の進捗**: 60%完了（監視体制は整備済）

### 5. 運用リスク（5件）

```
優先度分布:
🟡 高: 3件 (R5.1, R5.2, R5.3, R5.5)
🟢 中: 1件 (R5.4)
```

**主要な懸念事項**:
- データ保護とセキュリティ
- 監視・アラート体制の整備

**対策の進捗**: 60%完了（バックアップ、認証は実装済）

## リスクトレンド

### 月次推移（直近3ヶ月）

```
リスク数の推移
  │
25│
  │     ■ 最優先 (6-9)
20│     ■ 高 (3-5)
  │     ■ 中 (1-2)
15│  ▓▓▓
  │  ▓▓▓  ▓▓▓
10│  ▓▓▓  ▓▓▓  ▓▓▓
  │  ▓▓▓  ▓▓▓  ▓▓▓
 5│  ███  ███  ███
  │  ███  ███  ███
 0└──────────────────
    9月  10月  11月
```

**トレンド分析**:
- 最優先リスクは対策により9件→6件に削減
- 技術的な対策（キューイング、監視システム）により多くのリスクが軽減
- 外部依存リスクは継続的な監視が必要

## アクションが必要なリスク

### 今週中に対応が必要

| ID | リスク | アクション | 担当者 | 期限 |
|----|--------|-----------|--------|------|
| R4.5 | npmパッケージ脆弱性 | Dependabotの有効化 | セキュリティEng | 今週金曜 |
| R5.3 | ユーザー誤操作 | ソフトデリート実装計画 | バックエンドEng | 今週金曜 |

### 今月中に対応が必要

| ID | リスク | アクション | 担当者 | 期限 |
|----|--------|-----------|--------|------|
| R1.5 | バンドルサイズ肥大化 | コードスプリッティング実装 | フロントエンドEng | 月末 |
| R5.5 | 監視・アラート設定不備 | SLO/SLI定義と監視ダッシュボード | SRE | 月末 |

### 継続監視（アラート設定済）

| ID | リスク | 監視指標 | アラート閾値 |
|----|--------|---------|-------------|
| R1.1 | Claude APIレート制限 | RPM/TPM使用率 | >80% |
| R4.1 | API価格変動 | 月間API費用 | 予算の110%超過 |
| R1.3 | Firestoreパフォーマンス | クエリレイテンシ | p95 >500ms |

## リスク対応の成功指標

### 目標（2025年12月まで）

1. **最優先リスク削減**: 6件 → 3件以下
2. **対策実施率**: 90%以上
3. **インシデント発生率**: リスク管理により防げる率 >50%
4. **リスクレビュー参加率**: >90%

### 現在の進捗

- ✅ 対策済: 40% (8/20件)
- 🔵 実施中/監視中: 50% (10/20件)
- 🟡 計画中: 10% (2/20件)

## 次のステップ

1. **即時アクション**:
   - [ ] Dependabotの有効化（セキュリティエンジニア）
   - [ ] ソフトデリート実装計画（バックエンドエンジニア）

2. **今月中**:
   - [ ] コードスプリッティング実装（フロントエンドエンジニア）
   - [ ] SLO/SLI定義（SRE）
   - [ ] 月次リスクレビューの実施（全員）

3. **継続的**:
   - [ ] 週次のリスク監視指標レビュー
   - [ ] 新規リスクの早期発見
   - [ ] ステークホルダーへの定期報告

---

**最終更新**: 2025年11月
**次回レビュー**: 2025年12月（第1金曜日）
